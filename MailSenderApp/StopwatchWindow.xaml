<Window x:Class="MailSenderApp.StopwatchWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Chronomètre Analogique" Height="600" Width="500"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Titre -->
        <TextBlock Grid.Row="0" Text="Chronomètre" 
                   FontSize="28" FontWeight="Bold" 
                   HorizontalAlignment="Center" 
                   Margin="0,0,0,20"/>

        <!-- Horloge analogique -->
        <Viewbox Grid.Row="1" Margin="20">
            <Canvas Width="300" Height="300">
                <!-- Cercle extérieur (cadran) -->
                <Ellipse Width="300" Height="300" 
                         Stroke="#333" StrokeThickness="4"
                         Fill="White">
                    <Ellipse.Effect>
                        <DropShadowEffect BlurRadius="10" ShadowDepth="3" Opacity="0.3"/>
                    </Ellipse.Effect>
                </Ellipse>

                <!-- Marques des heures -->
                <Line X1="150" Y1="20" X2="150" Y2="40" Stroke="#333" StrokeThickness="3"/>
                <Line X1="150" Y1="260" X2="150" Y2="280" Stroke="#333" StrokeThickness="3"/>
                <Line X1="20" Y1="150" X2="40" Y2="150" Stroke="#333" StrokeThickness="3"/>
                <Line X1="260" Y1="150" X2="280" Y2="150" Stroke="#333" StrokeThickness="3"/>

                <!-- Marques des quarts -->
                <Line X1="237" Y1="63" X2="250" Y2="50" Stroke="#666" StrokeThickness="2"/>
                <Line X1="237" Y1="237" X2="250" Y2="250" Stroke="#666" StrokeThickness="2"/>
                <Line X1="63" Y1="63" X2="50" Y2="50" Stroke="#666" StrokeThickness="2"/>
                <Line X1="63" Y1="237" X2="50" Y2="250" Stroke="#666" StrokeThickness="2"/>

                <!-- Marques secondaires (chaque 5 secondes) -->
                <Ellipse Canvas.Left="145" Canvas.Top="35" Width="10" Height="10" Fill="#999"/>
                <Ellipse Canvas.Left="145" Canvas.Top="255" Width="10" Height="10" Fill="#999"/>
                <Ellipse Canvas.Left="35" Canvas.Top="145" Width="10" Height="10" Fill="#999"/>
                <Ellipse Canvas.Left="255" Canvas.Top="145" Width="10" Height="10" Fill="#999"/>

                <!-- Centre -->
                <Ellipse Canvas.Left="140" Canvas.Top="140" 
                         Width="20" Height="20" 
                         Fill="#333"/>

                <!-- Aiguille des heures -->
                <Line X1="150" Y1="150" X2="150" Y2="90" 
                      Stroke="#333" StrokeThickness="6"
                      RenderTransformOrigin="0,0">
                    <Line.RenderTransform>
                        <RotateTransform Angle="{Binding HourAngle}" CenterX="150" CenterY="150"/>
                    </Line.RenderTransform>
                </Line>

                <!-- Aiguille des minutes -->
                <Line X1="150" Y1="150" X2="150" Y2="60" 
                      Stroke="#555" StrokeThickness="4"
                      RenderTransformOrigin="0,0">
                    <Line.RenderTransform>
                        <RotateTransform Angle="{Binding MinuteAngle}" CenterX="150" CenterY="150"/>
                    </Line.RenderTransform>
                </Line>

                <!-- Aiguille des secondes -->
                <Line X1="150" Y1="150" X2="150" Y2="40" 
                      Stroke="#E91E63" StrokeThickness="2"
                      RenderTransformOrigin="0,0">
                    <Line.RenderTransform>
                        <RotateTransform Angle="{Binding SecondAngle}" CenterX="150" CenterY="150"/>
                    </Line.RenderTransform>
                </Line>

                <!-- Centre décoratif -->
                <Ellipse Canvas.Left="145" Canvas.Top="145" 
                         Width="10" Height="10" 
                         Fill="#E91E63"/>

                <!-- Texte au centre (optionnel) -->
                <TextBlock Canvas.Left="150" Canvas.Top="200" 
                           Text="Chrono"
                           FontSize="14" FontWeight="SemiBold"
                           Foreground="#666"
                           HorizontalAlignment="Center"
                           TextAlignment="Center">
                    <TextBlock.RenderTransform>
                        <TranslateTransform X="-25"/>
                    </TextBlock.RenderTransform>
                </TextBlock>
            </Canvas>
        </Viewbox>

        <!-- Affichage digital -->
        <Border Grid.Row="2" 
                Background="#333" 
                CornerRadius="10" 
                Padding="20,15" 
                Margin="0,20,0,20">
            <TextBlock Text="{Binding ElapsedTimeString}" 
                       FontSize="32" 
                       FontWeight="Bold" 
                       FontFamily="Consolas"
                       Foreground="#0F0"
                       HorizontalAlignment="Center"/>
        </Border>

        <!-- Boutons de contrôle -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Bouton Démarrer -->
            <Button Grid.Column="0" 
                    Content="▶ Démarrer" 
                    Height="50" Margin="5"
                    FontSize="16" FontWeight="Bold"
                    Background="#4CAF50" Foreground="White"
                    Command="{Binding StartCommand}"
                    Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#4CAF50"/>
                        <Style.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#CCCCCC"/>
                                <Setter Property="Foreground" Value="#666666"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <!-- Bouton Arrêter -->
            <Button Grid.Column="1" 
                    Content="⏸ Arrêter" 
                    Height="50" Margin="5"
                    FontSize="16" FontWeight="Bold"
                    Background="#FF9800" Foreground="White"
                    Command="{Binding StopCommand}"
                    Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#FF9800"/>
                        <Style.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#CCCCCC"/>
                                <Setter Property="Foreground" Value="#666666"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <!-- Bouton Réinitialiser -->
            <Button Grid.Column="2" 
                    Content="⟲ Réinitialiser" 
                    Height="50" Margin="5"
                    FontSize="16" FontWeight="Bold"
                    Background="#F44336" Foreground="White"
                    Command="{Binding ResetCommand}"
                    Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#F44336"/>
                        <Style.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#CCCCCC"/>
                                <Setter Property="Foreground" Value="#666666"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>
    </Grid>
</Window>